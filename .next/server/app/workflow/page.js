(()=>{var e={};e.id=33,e.ids=[33],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8805:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(7750),s(4614),s(5866);var a=s(3191),t=s(8716),i=s(7922),l=s.n(i),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(r,o);let d=["",{children:["workflow",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7750)),"/Users/aurish/development/ApprovalFlow/src/app/workflow/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4614)),"/Users/aurish/development/ApprovalFlow/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/aurish/development/ApprovalFlow/src/app/workflow/page.tsx"],p="/workflow/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/workflow/page",pathname:"/workflow",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7754:(e,r,s)=>{Promise.resolve().then(s.bind(s,6291))},3855:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8091:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6291:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>k});var a=s(326),t=s(7577),i=s(5047),l=s(4001),n=s(303),o=s(9752),d=s(1664),c=s(1190),p=s(4794),m=s(9280),u=s(8443),h=s(1714),x=s(361),f=s(4230),v=s(4061);let g=(0,s(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var j=s(3855),w=s(8091),y=s(3505),b=s(8644);let N=({onBack:e,onSave:r})=>{let[s,i]=(0,t.useState)("basic"),[l,n]=(0,t.useState)({name:"",department:"",type:"",description:"",steps:[{id:1,name:"Initial Review",approver:"",required:!0}]}),N=[{name:"Simple Approval",description:"Single approver workflow",icon:a.jsx(x.Z,{className:"h-5 w-5"}),steps:[{id:1,name:"Manager Approval",approver:"",required:!0}]},{name:"Sequential Approval",description:"Multi-level approval chain",icon:a.jsx(f.Z,{className:"h-5 w-5"}),steps:[{id:1,name:"Direct Manager",approver:"",required:!0},{id:2,name:"Department Head",approver:"",required:!0},{id:3,name:"Executive Approval",approver:"",required:!0}]},{name:"Parallel Review",description:"Multiple approvers simultaneously",icon:a.jsx(v.Z,{className:"h-5 w-5"}),steps:[{id:1,name:"Technical Review",approver:"",required:!0},{id:2,name:"Budget Review",approver:"",required:!0}]}],k=e=>{n(r=>({...r,steps:r.steps.filter(r=>r.id!==e)}))},A=(e,r,s)=>{n(a=>({...a,steps:a.steps.map(a=>a.id===e?{...a,[r]:s}:a)}))},P=async()=>{try{let e=await y.T.getCurrentUser();if(!e){b.A.error("Please sign in to save workflows");return}let{data:s}=await y.T.getCurrentUserWithOrganization();if(!s?.organization){b.A.error("Please complete organization setup first");return}if(!l.name.trim()){b.A.error("Workflow name is required");return}if(!l.department){b.A.error("Please select a department");return}if(!l.type){b.A.error("Please select a workflow type");return}if(0===l.steps.length){b.A.error("At least one approval step is required");return}if(l.steps.some(e=>!e.name.trim())){b.A.error("All approval steps must have names");return}let a={name:l.name.trim(),department:l.department,type:l.type,description:l.description.trim(),organization_id:s.organization.id,created_by:e.id},t=l.steps.map(e=>({name:e.name.trim(),approver:e.approver.trim(),required:e.required})),{data:i,error:n}=await y.T.createWorkflowWithSteps(a,t);if(n){console.error("Error saving workflow:",n),b.A.error("Failed to save workflow. Please try again.");return}b.A.success("Workflow saved successfully!"),r(i)}catch(e){console.error("Error saving workflow:",e),b.A.error("An unexpected error occurred. Please try again.")}},C=e=>{n(r=>({...r,steps:e.steps}))},q=()=>{P()};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white border-b",children:(0,a.jsxs)("div",{className:"px-6 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(d.z,{variant:"ghost",onClick:e,children:[a.jsx(g,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-bold",children:"Workflow Builder"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Create and configure approval workflows"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(d.z,{variant:"outline",children:"Preview"}),a.jsx(d.z,{onClick:q,className:"bg-gradient-to-r from-blue-600 to-purple-600",children:"Save Workflow"})]})]})}),a.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:(0,a.jsxs)(h.mQ,{value:s,onValueChange:i,className:"space-y-6",children:[(0,a.jsxs)(h.dr,{className:"grid w-full grid-cols-2",children:[a.jsx(h.SP,{value:"basic",children:"Basic Info"}),a.jsx(h.SP,{value:"steps",children:"Approval Steps"})]}),(0,a.jsxs)(h.nU,{value:"basic",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[a.jsx(o.ll,{children:"Workflow Information"}),a.jsx(o.SZ,{children:"Define the basic details of your approval workflow"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(p._,{htmlFor:"workflowName",children:"Workflow Name"}),a.jsx(c.I,{id:"workflowName",placeholder:"e.g., Marketing Budget Approval",value:l.name,onChange:e=>n(r=>({...r,name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(p._,{htmlFor:"department",children:"Department"}),(0,a.jsxs)(m.Ph,{onValueChange:e=>n(r=>({...r,department:e})),children:[a.jsx(m.i4,{children:a.jsx(m.ki,{placeholder:"Select department"})}),a.jsx(m.Bw,{children:["HR","Finance","Marketing","Legal","IT","Operations","Sales","Strategy","Design","Procurement","Admin"].map(e=>a.jsx(m.Ql,{value:e,children:e},e))})]})]})]}),l.department&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(p._,{htmlFor:"workflowType",children:"Workflow Type"}),(0,a.jsxs)(m.Ph,{onValueChange:e=>n(r=>({...r,type:e})),children:[a.jsx(m.i4,{children:a.jsx(m.ki,{placeholder:"Select workflow type"})}),a.jsx(m.Bw,{children:({HR:["Hiring Approval","Leave Request","Exit Clearance","Performance Review"],Finance:["Budget Approval","Invoice Processing","Expense Reimbursement","Payment Authorization"],Marketing:["Campaign Budget","Content Approval","PR Release","Event Sponsorship"],Legal:["Contract Review","Policy Change","Compliance Check","Legal Opinion"],IT:["Software Purchase","Access Request","Change Request","Security Review"],Operations:["Maintenance Request","Equipment Purchase","Process Change","Quality Check"],Sales:["Proposal Approval","Discount Authorization","Credit Limit","Deal Closure"],Strategy:["Investment Decision","Partnership Agreement","Strategic Initiative","Budget Planning"],Design:["Brand Approval","Asset Review","Creative Brief","Design Change"],Procurement:["Purchase Order","Vendor Selection","Contract Negotiation","Supplier Audit"],Admin:["Facility Request","Supply Order","Policy Update","Administrative Change"]})[l.department]?.map(e=>a.jsx(m.Ql,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(p._,{htmlFor:"description",children:"Description"}),a.jsx(c.I,{id:"description",placeholder:"Brief description of this workflow",value:l.description,onChange:e=>n(r=>({...r,description:e.target.value}))})]})]})]}),a.jsx("div",{className:"flex justify-end",children:(0,a.jsxs)(d.z,{onClick:()=>i("steps"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:["Next Step",a.jsx(f.Z,{className:"h-4 w-4 ml-2"})]})})]}),(0,a.jsxs)(h.nU,{value:"steps",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[a.jsx(o.ll,{children:"Quick Templates"}),a.jsx(o.SZ,{children:"Start with a pre-built workflow template"})]}),a.jsx(o.aY,{children:a.jsx("div",{className:"grid grid-cols-3 gap-4",children:N.map((e,r)=>a.jsx(o.Zb,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>C(e),children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[a.jsx("div",{className:"mb-2 text-blue-600",children:e.icon}),a.jsx("h4",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]})},r))})})]}),(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx(o.ll,{children:"Approval Steps"}),a.jsx(o.SZ,{children:"Configure the approval workflow steps"})]}),(0,a.jsxs)(d.z,{onClick:()=>{let e={id:l.steps.length+1,name:`Step ${l.steps.length+1}`,approver:"",required:!0};n(r=>({...r,steps:[...r.steps,e]}))},variant:"outline",children:[a.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Add Step"]})]})}),a.jsx(o.aY,{className:"space-y-4",children:l.steps.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[a.jsx(u.C,{variant:"outline",children:r+1}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[a.jsx(c.I,{placeholder:"Step name",value:e.name,onChange:r=>A(e.id,"name",r.target.value)}),a.jsx(c.I,{placeholder:"Approver email",value:e.approver,onChange:r=>A(e.id,"approver",r.target.value)})]}),l.steps.length>1&&a.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>k(e.id),children:a.jsx(w.Z,{className:"h-4 w-4 text-red-500"})})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(d.z,{onClick:()=>i("basic"),variant:"outline",children:[a.jsx(g,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,a.jsxs)(d.z,{onClick:q,className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:[a.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Save Workflow"]})]})]})]})})]})};function k(){let{user:e,loading:r}=(0,l.a)(),{organization:s}=(0,n.b)(),t=(0,i.useRouter)();return r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e&&s?a.jsx(N,{onBack:()=>{t.push("/dashboard")},onSave:e=>{t.push("/dashboard")}}):null}},9280:(e,r,s)=>{"use strict";s.d(r,{Bw:()=>x,Ph:()=>c,Ql:()=>f,i4:()=>m,ki:()=>p});var a=s(326),t=s(7577),i=s(3326),l=s(8393),n=s(6633),o=s(2933),d=s(1223);let c=i.fC;i.ZA;let p=i.B4,m=t.forwardRef(({className:e,children:r,...s},t)=>(0,a.jsxs)(i.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground/60 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary focus-visible:border-primary/50 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-colors",e),...s,children:[r,a.jsx(i.JO,{asChild:!0,children:a.jsx(l.Z,{className:"h-4 w-4 opacity-50 transition-transform duration-200 ease-in-out group-data-[state=open]:rotate-180"})})]}));m.displayName=i.xz.displayName;let u=t.forwardRef(({className:e,...r},s)=>a.jsx(i.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-muted-foreground",e),...r,children:a.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=i.u_.displayName;let h=t.forwardRef(({className:e,...r},s)=>a.jsx(i.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-muted-foreground",e),...r,children:a.jsx(l.Z,{className:"h-4 w-4"})}));h.displayName=i.$G.displayName;let x=t.forwardRef(({className:e,children:r,position:s="popper",...t},l)=>a.jsx(i.h_,{children:(0,a.jsxs)(i.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border/40 bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 duration-200","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...t,children:[a.jsx(u,{}),a.jsx(i.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),a.jsx(h,{})]})}));x.displayName=i.VY.displayName,t.forwardRef(({className:e,...r},s)=>a.jsx(i.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-medium text-muted-foreground",e),...r})).displayName=i.__.displayName;let f=t.forwardRef(({className:e,children:r,...s},t)=>(0,a.jsxs)(i.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent/50 focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 transition-colors",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(o.Z,{className:"h-4 w-4 text-primary"})})}),a.jsx(i.eT,{children:r})]}));f.displayName=i.ck.displayName,t.forwardRef(({className:e,...r},s)=>a.jsx(i.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=i.Z0.displayName},7750:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/aurish/development/ApprovalFlow/src/app/workflow/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[78,947,99,311,21],()=>s(8805));module.exports=a})();